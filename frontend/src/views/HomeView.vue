<template>
  <h2 class="mb-4">âš¾ï¸ í™ˆ: ë‚´ ì„±ì  ë° ìµœê·¼ í™œë™</h2>

  <div class="card shadow-sm mb-4">
    <div class="card-header bg-warning text-dark">
      <h5 class="mb-0">ğŸ‘¤ ë‚´ í”„ë¡œí•„</h5>
    </div>
    <div class="card-body">
      <p><strong>ì´ë¦„:</strong> í™ê¸¸ë™</p>
      <p>
        <strong>ì£¼ í¬ì§€ì…˜:</strong>
        {{
          batterSummary.totalPA > 0 && pitcherSummary.totalIP > 0
            ? "íˆ¬íƒ€ ê²¸ì—…"
            : batterSummary.totalPA > 0
            ? "íƒ€ì"
            : pitcherSummary.totalIP > 0
            ? "íˆ¬ìˆ˜"
            : "ê¸°ë¡ ì—†ìŒ"
        }}
      </p>
      <p><strong>ì´ ê²½ê¸° ìˆ˜:</strong> {{ allRecords.length }} ê²½ê¸°</p>
    </div>
  </div>

  <div class="card shadow-sm mb-5">
    <div class="card-header bg-primary text-white">
      <h5 class="mb-0">ğŸ“Š ì‹œì¦Œ ì„±ì  ìš”ì•½</h5>
    </div>
    <div class="card-body">
      <h4 class="text-danger fw-bold">
        {{ batterSummary.battingAvg }} AVG /
        {{ pitcherSummary.era.toFixed(2) }} ERA
      </h4>
      <p class="text-muted small">íƒ€ìœ¨ / ë°©ì–´ìœ¨</p>
    </div>
  </div>

  <h3 class="mt-5 mb-3">ğŸ—“ï¸ ìµœê·¼ ê²½ê¸° ê¸°ë¡</h3>
  <GameList
    :games="allRecords.slice().reverse().slice(0, 3)"
    :is-summary-view="true"
    @edit-game="openEditModal"
    @delete-game="handleDeleteGame"
  />

  <div class="d-grid gap-2 mt-4">
    <router-link to="/games" class="btn btn-outline-primary">
      ì „ì²´ ê²½ê¸° ê¸°ë¡ ëª©ë¡ ë³´ê¸°
    </router-link>
  </div>
</template>

<script setup>
import { useRecords } from "../composables/useRecords";
import { useModal } from "../composables/useModal";
import GameList from "../components/GameList.vue";

// Composables Hook
const { allRecords, batterSummary, pitcherSummary, handleDeleteGame } =
  useRecords();
const { openEditModal } = useModal();
</script>
